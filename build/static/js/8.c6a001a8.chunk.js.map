{"version":3,"sources":["components/HistoryGraph.tsx"],"names":["useStyles","makeStyles","theme","HistoryGraph","borderRadius","padding","margin","width","minHeight","history","classes","useEffect","color","primary","am4core","secondary","am4themes_dark","am4themes_animated","autoDispose","chart","am4charts","marginLeft","drawerWidth","marginRight","value","date","data","previousValue","i","length","push","dateFormatter","inputDateFormat","dateAxis","xAxes","valueAxis","yAxes","series","customizeGrip","grip","background","fill","fillOpacity","scrollbarConstructor","scrollbar","startGrip","endGrip","icon","stroke","dataFields","valueY","dateX","tooltipText","propertyFields","skipEmptyPeriods","renderer","minGridDistance","grid","template","location","strokeWidth","minBulletDistance","tooltip","cornerRadius","strokeOpacity","pointerOrientation","label","minWidth","textAlign","scrollbarY","parent","leftAxesContainer","toBack","scrollbarX","bottomAxesContainer","dateAxisTooltip","cursorTooltipEnabled","cursor","keepSelection","dispose","id","className"],"mappings":"gIACA,iFAcMA,EAAYC,aAAW,SAACC,GAAD,MAAY,CACvCC,aAAc,CACZC,aAAc,GACdC,QAAS,GACTC,OAAO,OACPC,MAAO,MAAOC,UAAW,SAwHZL,UArHb,YACa,IAAXM,EAAU,EAAVA,QACQC,EAAUV,IA8GlB,OA3GEW,qBAAU,WACV,IAAMC,EAAQ,CACZC,QAASC,IAAc,WACvBC,UAAWD,IAAc,YAE3BA,IAAiBE,KACjBF,IAAiBG,KACjBH,IAAgBI,aAAc,EAE9B,IAAIC,EAAQL,IAAe,WAAYM,KACrCD,EAAME,WAAaC,IACnBH,EAAMI,YAAcD,IAMtB,IALA,IACIE,EAAOC,EADPC,EAAyB,GAEzBC,EAAgB,EAGXC,EAAI,EAAGA,EAAInB,EAAQoB,OAAQD,IAClCJ,EAAQf,EAAQmB,GAAR,MACRH,EAAOhB,EAAQmB,GAAR,KAEJA,EAAI,IACLF,EAAKE,EAAI,GAAGhB,MAAQe,GAAiBH,EACnCZ,EAAMC,QACND,EAAMG,WAEVW,EAAKI,KAAK,CACRL,KAAMA,EACND,MAAOA,IACTG,EAAgBH,EAEpBL,EAAMO,KAAOA,EAGXP,EAAMY,cAAcC,gBAAkB,aACtC,IAAIC,EAAWd,EAAMe,MAAMJ,KAAK,IAAIV,KAChCe,EAAYhB,EAAMiB,MAAMN,KAAK,IAAIV,KACjCiB,EAASlB,EAAMkB,OAAOP,KAAK,IAAIV,KA2CnC,SAASkB,EAAcC,GACrBA,EAAKC,WAAWC,KAAO7B,EAAMG,UAC7BwB,EAAKC,WAAWE,YAAc,GAEhC,SAASC,EAAqBC,GAC5BN,EAAcM,EAAUC,WACxBP,EAAcM,EAAUE,SACxBF,EAAUJ,WAAWC,KAAO7B,EAAMC,QAClC+B,EAAUE,QAAQC,KAAKC,OAASpC,EAAMC,QACtC+B,EAAUC,UAAUE,KAAKC,OAASpC,EAAMC,QAnD1CwB,EAAOY,WAAWC,OAAS,QAC3Bb,EAAOY,WAAWE,MAAQ,OAC1Bd,EAAOe,YAAc,UACrBf,EAAOW,OAASpC,EAAMC,QACtBwB,EAAOgB,eAAeL,OAAS,QAE/Bf,EAASqB,kBAAmB,EAC5BrB,EAASsB,SAASC,gBAAkB,GACpCvB,EAASsB,SAASE,KAAKC,SAASC,SAAW,EAE3CtB,EAAOuB,YAAc,EAErBvB,EAAOI,KAAOJ,EAAOW,OACrBX,EAAOK,YAAc,GACrBL,EAAOwB,kBAAoB,GAGvBxB,EAAOyB,UACXzB,EAAOyB,QAAQtB,WAAWuB,aAAe,GACzC1B,EAAOyB,QAAQtB,WAAWwB,cAAgB,GAC1C3B,EAAOyB,QAAQG,mBAAqB,WACpC5B,EAAOyB,QAAQI,MAAM7D,QAAQ,GAAG,GAAG,GAAG,IACtCgC,EAAOyB,QAAQI,MAAMC,SAAW,GAChC9B,EAAOyB,QAAQI,MAAM1D,UAAY,GACjC6B,EAAOyB,QAAQI,MAAME,UAAY,UAGjCjD,EAAMkD,WAAa,IAAIvD,IACvBK,EAAMkD,WAAWC,OAASnD,EAAMoD,kBAChCpD,EAAMkD,WAAWG,SAGjBrD,EAAMsD,WAAa,IAAIrD,IAKvBD,EAAMsD,WAAWH,OAASnD,EAAMuD,oBAgBhC/B,EAAqBxB,EAAMkD,YAC3B1B,EAAqBxB,EAAMsD,YAE3B,IAAIE,EAAkB1C,EAAS6B,QAQ/B,OAPA3B,EAAUyC,sBAAuB,EACjCzD,EAAM0D,OAAS,IAAIzD,IAEnBa,EAAS6C,eAAgB,EACrBH,IACFA,EAAgBnC,WAAWC,KAAO7B,EAAMC,SAEnC,WACLM,EAAM4D,aAEL,CAACtE,IAGJ,kBAAC,IAAD,CAAauE,GAAG,WAAWC,UAAWvE,EAAQP","file":"static/js/8.c6a001a8.chunk.js","sourcesContent":["\nimport React, {  useEffect } from \"react\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport {  IDataItem } from './types'\n\n\nimport { CardContent } from '@material-ui/core';\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_dark from \"@amcharts/amcharts4/themes/dark\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\n\nconst drawerWidth = 290;\nconst drawerClosed = 130;\n\nconst useStyles = makeStyles((theme) => ({\n  HistoryGraph: {\n    borderRadius: 12,\n    padding: 30,\n    margin:'auto',\n    width: \"95%\", minHeight: 730},\n  }));\n\n    function HistoryGraph({  \n      history}) {\n        const classes = useStyles();\n\n        /* useLayoutEffect */\n        useEffect(() => {\n        const color = { \n          primary: am4core.color('#8CFFDA'),\n          secondary: am4core.color('#e385bb')\n        }\n        am4core.useTheme(am4themes_dark);\n        am4core.useTheme(am4themes_animated)  ;\n        am4core.options.autoDispose = true;\n      \n        let chart = am4core.create(\"chartdiv\", am4charts.XYChart);\n          chart.marginLeft = drawerWidth -10\n          chart.marginRight = drawerWidth -40\n        let data: Array<IDataItem> = [];\n        let value, date;\n        let previousValue = 0;\n      // used to build a color difference for increase or\n      // decrease in previous value \n        for (let i = 0; i < history.length; i++) {\n          value = history[i]['value'];\n          date = history[i]['date'];\n          //change the color of previous value\n          if(i > 0){\n            data[i - 1].color = previousValue <= value ?\n              color.primary :\n              color.secondary\n          }     \n          data.push({ \n            date: date, \n            value: value });\n          previousValue = value;\n      } \n      chart.data = data;\n      \n        // chart.data = history;\n        chart.dateFormatter.inputDateFormat = \"yyyy-MM-dd\";\n        let dateAxis = chart.xAxes.push(new am4charts.DateAxis());\n        let valueAxis = chart.yAxes.push(new am4charts.ValueAxis());\n        let series = chart.series.push(new am4charts.LineSeries());\n        series.dataFields.valueY = \"value\";\n        series.dataFields.dateX = \"date\";\n        series.tooltipText = \"{value}\";\n        series.stroke = color.primary;\n        series.propertyFields.stroke = \"color\";\n      \n        dateAxis.skipEmptyPeriods = true;\n        dateAxis.renderer.minGridDistance = 45;\n        dateAxis.renderer.grid.template.location = 0;\n      \n        series.strokeWidth = 3;\n        // series.tensionX = 0.8; // can't keep this with changing color of line depending on delta being +/- as its a new line after every change\n        series.fill = series.stroke;\n        series.fillOpacity = 0.2;\n        series.minBulletDistance = 15;\n      \n        // Drop-shaped tooltips\n        if (series.tooltip) {\n        series.tooltip.background.cornerRadius = 20;\n        series.tooltip.background.strokeOpacity = 0.5;\n        series.tooltip.pointerOrientation = \"vertical\";\n        series.tooltip.label.padding(12,12,12,12)\n        series.tooltip.label.minWidth = 40;\n        series.tooltip.label.minHeight = 40;\n        series.tooltip.label.textAlign = \"middle\";\n        }\n        // Create vertical scrollbar and place it before the value axis\n        chart.scrollbarY = new am4core.Scrollbar();\n        chart.scrollbarY.parent = chart.leftAxesContainer;\n        chart.scrollbarY.toBack();\n      \n        // Create a horizontal scrollbar with preview and place it underneath the date axis\n        chart.scrollbarX = new am4charts.XYChartScrollbar();\n      \n      \n        //need to fix the series on this with typescript yelling\n        //chart.scrollbarX.series.push(series);\n        chart.scrollbarX.parent = chart.bottomAxesContainer;\n        /* \n          need to fix this typing later on, shouldn't have any\n          */\n        //styling for the scroll bar\n        function customizeGrip(grip: any) {\n          grip.background.fill = color.secondary;\n          grip.background.fillOpacity = 0.9;}\n      \n        function scrollbarConstructor(scrollbar: any) {\n          customizeGrip(scrollbar.startGrip);\n          customizeGrip(scrollbar.endGrip);\n          scrollbar.background.fill = color.primary;\n          scrollbar.endGrip.icon.stroke = color.primary;\n          scrollbar.startGrip.icon.stroke = color.primary;}\n      \n        scrollbarConstructor(chart.scrollbarY)\n        scrollbarConstructor(chart.scrollbarX)\n        \n        let dateAxisTooltip = dateAxis.tooltip;\n        valueAxis.cursorTooltipEnabled = false;\n        chart.cursor = new am4charts.XYCursor();\n      \n        dateAxis.keepSelection = true;\n        if (dateAxisTooltip) {\n          dateAxisTooltip.background.fill = color.primary;}\n      \n        return () => {\n          chart.dispose();\n          };\n        }, [history]);\n\n      return (\n        <CardContent id=\"chartdiv\" className={classes.HistoryGraph} />\n      );\n    }\n\n  export default HistoryGraph "],"sourceRoot":""}